'use client';
import { useGetCommentById } from '@/hooks/comments/useGetCommentById';
import { Blog } from '@/store/types';
import React from 'react';
import { Comments_icon } from '../common/icon';

const InfoBlog = ({ blog }: { blog: Blog }) => {
  const { isSuccess, data } = useGetCommentById(blog?._id);
  const count = isSuccess ? data?.data?.data?.ratingStats?.count : 0;

  return (
    <div>
      <h1 className="pt-[24px] font-bold text-xl text-[#172334] dark:text-white lg:text-3xl">
        {blog?.title}
      </h1>
      <div className="mt-3 grid grid-cols-2 flex-wrap items-center gap-4 lg:mt-[24px] lg:flex lg:gap-[24px]">
        <div className="flex items-center gap-2">
          <span>
            <svg
              width="32"
              height="33"
              viewBox="0 0 32 33"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect y="0.724609" width="32" height="32" rx="4" fill="#E5EAEF" />
              <path
                opacity="0.4"
                d="M15.9987 16.724C19.6806 16.724 22.6654 13.7392 22.6654 10.0573C22.6654 6.37539 19.6806 3.39062 15.9987 3.39062C12.3168 3.39062 9.33203 6.37539 9.33203 10.0573C9.33203 13.7392 12.3168 16.724 15.9987 16.724Z"
                fill="#505B74"
              />
              <path
                opacity="0.4"
                d="M15.9989 20.0586C9.3189 20.0586 3.87891 24.5386 3.87891 30.0586C3.87891 30.4319 4.17224 30.7253 4.54557 30.7253H27.4522C27.8256 30.7253 28.1189 30.4319 28.1189 30.0586C28.1189 24.5386 22.6789 20.0586 15.9989 20.0586Z"
                fill="#505B74"
              />
            </svg>
          </span>
          <span className="font-light text-[12px] text-[#6A7890] dark:text-[#8E98A8] lg:text-[14px]">
            {blog?.author?.firstName} {blog?.author?.lastName}
          </span>
        </div>
        <div className="flex items-center gap-2">
          <svg
            width="24"
            height="25"
            viewBox="0 0 24 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 3.04199C13.2584 3.04199 14.5044 3.28994 15.667 3.77148C16.8297 4.25309 17.8865 4.95874 18.7764 5.84863C19.555 6.62725 20.1932 7.53313 20.6631 8.52637L20.8535 8.95801C21.3351 10.1206 21.583 11.3666 21.583 12.625C21.583 14.5204 21.0208 16.3732 19.9678 17.9492C18.9148 19.5251 17.418 20.7532 15.667 21.4785C13.9161 22.2037 11.9896 22.394 10.1309 22.0244C8.3881 21.6778 6.77822 20.8534 5.47949 19.6475L5.22363 19.4014C3.96726 18.145 3.08668 16.5659 2.67676 14.8418L2.60059 14.4941C2.25405 12.7515 2.39952 10.9493 3.0166 9.28809L3.14648 8.95801C3.82653 7.31624 4.9485 5.89791 6.38477 4.85938L6.67578 4.65723C8.25175 3.6042 10.1046 3.04199 12 3.04199ZM15.2207 4.84863C13.7791 4.25156 12.2017 4.0676 10.665 4.31445L10.3584 4.37012C8.82793 4.67455 7.41401 5.39806 6.27344 6.45703L6.04883 6.67383C4.94525 7.77741 4.17147 9.16427 3.81152 10.6787L3.74512 10.9834C3.44076 12.5139 3.56838 14.0967 4.11035 15.5557L4.22363 15.8457C4.82089 17.2876 5.80692 18.5332 7.06836 19.4453L7.32422 19.623C8.70831 20.5478 10.3354 21.042 12 21.042C14.0928 21.042 16.1054 20.2624 17.6494 18.8643L17.9512 18.5762C19.5296 16.9977 20.417 14.8572 20.417 12.625C20.417 10.9604 19.9228 9.33331 18.998 7.94922C18.1311 6.65167 16.9218 5.62213 15.5068 4.97363L15.2207 4.84863ZM12 7.04199C12.1547 7.04199 12.3027 7.1035 12.4121 7.21289C12.5215 7.32229 12.583 7.47029 12.583 7.625V12.042H15C15.1547 12.042 15.3027 12.1035 15.4121 12.2129C15.5215 12.3223 15.583 12.4703 15.583 12.625C15.583 12.7797 15.5215 12.9277 15.4121 13.0371C15.3027 13.1465 15.1547 13.208 15 13.208H12C11.8453 13.208 11.6973 13.1465 11.5879 13.0371C11.4785 12.9277 11.417 12.7797 11.417 12.625V7.625C11.417 7.47029 11.4785 7.32229 11.5879 7.21289C11.6973 7.1035 11.8453 7.04199 12 7.04199Z"
              fill="#8E98A8"
              stroke="#8E98A8"
              stroke-width="0.833333"
            />
          </svg>
          <div className="flex gap-1">
            <span className="font-light text-[12px] text-[#8E98A8] lg:text-[14px]">
              زمان مطالعه:
            </span>
            <span className="font-light text-[12px] text-[#6A7890] lg:text-[14px]">
              {blog?.readTime} دقیقه
            </span>
          </div>
        </div>
        <div className="flex items-center gap-2">
          <svg
            width="24"
            height="25"
            viewBox="0 0 24 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16 3.04199C16.1547 3.04199 16.3027 3.1035 16.4121 3.21289C16.5215 3.32229 16.583 3.47029 16.583 3.625V5.04199H19C19.6851 5.04199 20.3427 5.31338 20.8271 5.79785C21.3116 6.28232 21.583 6.93986 21.583 7.625V19.625C21.583 20.3101 21.3116 20.9677 20.8271 21.4521C20.3427 21.9366 19.6851 22.208 19 22.208H5C4.40032 22.208 3.82206 21.9999 3.3623 21.623L3.17285 21.4521C2.68838 20.9677 2.41699 20.3101 2.41699 19.625V7.625L2.42969 7.37012C2.47997 6.86289 2.67882 6.38151 3.00195 5.9873L3.17285 5.79785C3.65732 5.31338 4.31486 5.04199 5 5.04199H7.41699V3.625C7.41699 3.50908 7.45133 3.39683 7.51465 3.30176L7.58789 3.21289C7.66997 3.13081 7.77357 3.07513 7.88574 3.05273L8 3.04199C8.11592 3.04199 8.22817 3.07633 8.32324 3.13965L8.41211 3.21289C8.52151 3.32229 8.58301 3.47029 8.58301 3.625V5.04199H15.417V3.625C15.417 3.50908 15.4513 3.39683 15.5146 3.30176L15.5879 3.21289C15.67 3.13081 15.7736 3.07513 15.8857 3.05273L16 3.04199ZM3.58301 19.625C3.58301 20.0007 3.73237 20.3613 3.99805 20.627C4.26372 20.8926 4.62428 21.042 5 21.042H19C19.3757 21.042 19.7363 20.8926 20.002 20.627C20.2676 20.3613 20.417 20.0007 20.417 19.625V12.208H3.58301V19.625ZM5 6.20801C4.62428 6.20801 4.26372 6.35737 3.99805 6.62305C3.73237 6.88872 3.58301 7.24928 3.58301 7.625V11.042H20.417V7.625C20.417 7.24928 20.2676 6.88872 20.002 6.62305C19.7363 6.35737 19.3757 6.20801 19 6.20801H16.583V7.625C16.583 7.74092 16.5487 7.85317 16.4854 7.94824L16.4121 8.03711C16.3027 8.1465 16.1547 8.20801 16 8.20801C15.8841 8.20801 15.7718 8.17367 15.6768 8.11035L15.5879 8.03711C15.4785 7.92771 15.417 7.77971 15.417 7.625V6.20801H8.58301V7.625C8.58301 7.77971 8.52151 7.92771 8.41211 8.03711C8.30271 8.14651 8.15471 8.20801 8 8.20801C7.84529 8.20801 7.69729 8.14651 7.58789 8.03711C7.47849 7.92771 7.41699 7.77971 7.41699 7.625V6.20801H5Z"
              fill="#8E98A8"
              stroke="#8E98A8"
              stroke-width="0.833333"
            />
          </svg>

          <div className="flex gap-1">
            <span className="font-light text-[12px] text-[#8E98A8] lg:text-[14px]">
              زمان انتشار:
            </span>
            <span className="font-light text-[12px] text-[#6A7890] lg:text-[14px]">
              {new Date(blog?.createdAt).toLocaleDateString('fa-IR', {
                year: '2-digit',
                month: '2-digit',
                day: '2-digit',
              })}
            </span>
          </div>
        </div>
        {isSuccess && (
          <div className="flex items-center gap-2">
            <Comments_icon className="h-7 w-7" />

            <div className="flex gap-1">
              <span className="font-light text-[12px] text-[#8E98A8] lg:text-[14px]">
                دیدگاه‌ها:
              </span>
              <span className="font-light text-[12px] text-[#6A7890] lg:text-[14px]">{count}</span>
            </div>
          </div>
        )}
      </div>
      <p className="mt-8 text-justify font-medium text-[14px] leading-8 text-[#33435A] dark:text-[#8E98A8] lg:mt-14">
        {blog?.shortDescription}
      </p>
    </div>
  );
};

export default InfoBlog;
