'use client';
import React from 'react';
import useBasket from '@/hooks/basket/useBasket';
import Link from 'next/link';
const Cart = () => {
  // const [open, setOpen] = useState(false);
  const { totalCountBasket } = useBasket();
  // const router = useRouter();

  // const onClose = () => setOpen(!open);
  // const onRedirect = () => {
  //   router.push('/cart/');
  //   onClose();
  // };
  return (
    <div className="flex items-center gap-4">
      <Link
        href="/cart/"
        className="!h-[48px] !w-[48px] min-w-[48px] overflow-visible rounded-[12px] border border-[#E5EAEF] bg-transparent"
      >
        <span>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3 2.5H3.93848L4.13086 2.50781C4.51474 2.53851 4.88648 2.6575 5.2168 2.85547L5.37793 2.96094C5.79858 3.25931 6.11716 3.68076 6.28906 4.16699L6.40625 4.5H21.0176C21.096 4.49728 21.1739 4.51291 21.2451 4.5459C21.3153 4.57843 21.3765 4.62711 21.4248 4.6875H21.4258C21.4723 4.74748 21.505 4.81729 21.5205 4.8916C21.5283 4.92894 21.5311 4.96699 21.5303 5.00488L21.5156 5.11719L19.8652 11.6064V11.6084C19.7297 12.1488 19.4169 12.628 18.9775 12.9707C18.5383 13.3133 17.9975 13.4999 17.4404 13.5H7C6.60218 13.5 6.22076 13.6581 5.93945 13.9395C5.65815 14.2208 5.5 14.6022 5.5 15C5.5 15.3978 5.65815 15.7792 5.93945 16.0605C6.22076 16.3419 6.60218 16.5 7 16.5H21C21.1326 16.5 21.2597 16.5527 21.3535 16.6465C21.4473 16.7403 21.5 16.8674 21.5 17C21.5 17.1326 21.4473 17.2597 21.3535 17.3535C21.2597 17.4473 21.1326 17.5 21 17.5H20.1064L20.3496 18.1709C20.4866 18.5485 20.5312 18.9534 20.4785 19.3516C20.4258 19.7498 20.2774 20.1291 20.0469 20.458C19.8164 20.7869 19.5105 21.0558 19.1543 21.2412C18.7979 21.4266 18.4017 21.5234 18 21.5234C17.5983 21.5234 17.2021 21.4266 16.8457 21.2412C16.4895 21.0558 16.1836 20.7869 15.9531 20.458C15.7226 20.1291 15.5742 19.7498 15.5215 19.3516C15.4688 18.9534 15.5134 18.5485 15.6504 18.1709L15.8936 17.5H12.1064L12.3496 18.1709C12.4866 18.5485 12.5312 18.9534 12.4785 19.3516C12.4258 19.7498 12.2774 20.1291 12.0469 20.458C11.8164 20.7869 11.5105 21.0558 11.1543 21.2412C10.7979 21.4266 10.4017 21.5234 10 21.5234C9.59829 21.5234 9.20207 21.4266 8.8457 21.2412C8.4895 21.0558 8.1836 20.7869 7.95312 20.458C7.72261 20.1291 7.57419 19.7498 7.52148 19.3516C7.46879 18.9534 7.51338 18.5485 7.65039 18.1709L7.89355 17.5H6.98828L6.97754 17.501C6.31444 17.5308 5.66678 17.2954 5.17676 16.8477C4.68672 16.3998 4.3941 15.7755 4.36426 15.1123C4.33448 14.4492 4.5698 13.8015 5.01758 13.3115C5.46541 12.8215 6.08979 12.5289 6.75293 12.499L7.36719 12.4717L7.21484 11.876L5.49219 5.14648L5.43652 4.69824L5.43262 4.66895L5.42578 4.64062L5.38965 4.51758C5.2939 4.23537 5.1157 3.9872 4.87695 3.80566C4.60801 3.60127 4.27787 3.49354 3.94043 3.5H3C2.90056 3.5 2.80419 3.47037 2.72266 3.41602L2.64648 3.35352C2.55272 3.25975 2.5 3.13261 2.5 3L2.50977 2.90234C2.52255 2.83817 2.54769 2.7771 2.58398 2.72266L2.64648 2.64648C2.71689 2.57608 2.80611 2.52894 2.90234 2.50977L3 2.5ZM10.5742 17.6143C10.3001 17.5007 9.998 17.4714 9.70703 17.5293C9.41622 17.5872 9.14913 17.7298 8.93945 17.9395C8.72977 18.1491 8.58723 18.4162 8.5293 18.707C8.47142 18.998 8.50073 19.3001 8.61426 19.5742C8.7278 19.8482 8.92038 20.0823 9.16699 20.2471C9.41363 20.4118 9.7034 20.5 10 20.5C10.3978 20.5 10.7792 20.3419 11.0605 20.0605C11.3419 19.7792 11.5 19.3978 11.5 19C11.5 18.7034 11.4118 18.4136 11.2471 18.167C11.0823 17.9204 10.8482 17.7278 10.5742 17.6143ZM18.5742 17.6143C18.3001 17.5007 17.998 17.4714 17.707 17.5293C17.4162 17.5872 17.1491 17.7298 16.9395 17.9395C16.7298 18.1491 16.5872 18.4162 16.5293 18.707C16.4714 18.998 16.5007 19.3001 16.6143 19.5742C16.7278 19.8482 16.9204 20.0823 17.167 20.2471C17.4136 20.4118 17.7034 20.5 18 20.5C18.3978 20.5 18.7792 20.3419 19.0605 20.0605C19.3419 19.7792 19.5 19.3978 19.5 19C19.5 18.7034 19.4118 18.4136 19.2471 18.167C19.0823 17.9204 18.8482 17.7278 18.5742 17.6143ZM8.38965 12.5H17.4102V12.499C17.7477 12.5056 18.0777 12.3988 18.3467 12.1943C18.6193 11.9871 18.8123 11.6928 18.8945 11.3604L18.8955 11.3613L20.2051 6.12109L20.3604 5.5H6.63965L8.38965 12.5Z"
              fill="#6E3DFF"
              stroke="#6E3DFF"
            />
          </svg>
        </span>
        {totalCountBasket >= 1 ? (
          <span className="absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-main font-regular text-[12px] text-white">
            {totalCountBasket ?? 0}
          </span>
        ) : null}
      </Link>
      {/* <span className="hidden lg:block">
        <Dropdown
          closeOnSelect={false}
          placement="bottom-start"
          isOpen={open}
          onOpenChange={onClose}
        // shouldCloseOnInteractOutside={onClose}
        >
          <DropdownTrigger>
            <Link
              onPress={onClose}
              className="!h-[48px] !w-[48px] min-w-[48px] overflow-visible rounded-[12px] border border-[#E5EAEF] bg-transparent"
            >
              <span>
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M3 2.5H3.93848L4.13086 2.50781C4.51474 2.53851 4.88648 2.6575 5.2168 2.85547L5.37793 2.96094C5.79858 3.25931 6.11716 3.68076 6.28906 4.16699L6.40625 4.5H21.0176C21.096 4.49728 21.1739 4.51291 21.2451 4.5459C21.3153 4.57843 21.3765 4.62711 21.4248 4.6875H21.4258C21.4723 4.74748 21.505 4.81729 21.5205 4.8916C21.5283 4.92894 21.5311 4.96699 21.5303 5.00488L21.5156 5.11719L19.8652 11.6064V11.6084C19.7297 12.1488 19.4169 12.628 18.9775 12.9707C18.5383 13.3133 17.9975 13.4999 17.4404 13.5H7C6.60218 13.5 6.22076 13.6581 5.93945 13.9395C5.65815 14.2208 5.5 14.6022 5.5 15C5.5 15.3978 5.65815 15.7792 5.93945 16.0605C6.22076 16.3419 6.60218 16.5 7 16.5H21C21.1326 16.5 21.2597 16.5527 21.3535 16.6465C21.4473 16.7403 21.5 16.8674 21.5 17C21.5 17.1326 21.4473 17.2597 21.3535 17.3535C21.2597 17.4473 21.1326 17.5 21 17.5H20.1064L20.3496 18.1709C20.4866 18.5485 20.5312 18.9534 20.4785 19.3516C20.4258 19.7498 20.2774 20.1291 20.0469 20.458C19.8164 20.7869 19.5105 21.0558 19.1543 21.2412C18.7979 21.4266 18.4017 21.5234 18 21.5234C17.5983 21.5234 17.2021 21.4266 16.8457 21.2412C16.4895 21.0558 16.1836 20.7869 15.9531 20.458C15.7226 20.1291 15.5742 19.7498 15.5215 19.3516C15.4688 18.9534 15.5134 18.5485 15.6504 18.1709L15.8936 17.5H12.1064L12.3496 18.1709C12.4866 18.5485 12.5312 18.9534 12.4785 19.3516C12.4258 19.7498 12.2774 20.1291 12.0469 20.458C11.8164 20.7869 11.5105 21.0558 11.1543 21.2412C10.7979 21.4266 10.4017 21.5234 10 21.5234C9.59829 21.5234 9.20207 21.4266 8.8457 21.2412C8.4895 21.0558 8.1836 20.7869 7.95312 20.458C7.72261 20.1291 7.57419 19.7498 7.52148 19.3516C7.46879 18.9534 7.51338 18.5485 7.65039 18.1709L7.89355 17.5H6.98828L6.97754 17.501C6.31444 17.5308 5.66678 17.2954 5.17676 16.8477C4.68672 16.3998 4.3941 15.7755 4.36426 15.1123C4.33448 14.4492 4.5698 13.8015 5.01758 13.3115C5.46541 12.8215 6.08979 12.5289 6.75293 12.499L7.36719 12.4717L7.21484 11.876L5.49219 5.14648L5.43652 4.69824L5.43262 4.66895L5.42578 4.64062L5.38965 4.51758C5.2939 4.23537 5.1157 3.9872 4.87695 3.80566C4.60801 3.60127 4.27787 3.49354 3.94043 3.5H3C2.90056 3.5 2.80419 3.47037 2.72266 3.41602L2.64648 3.35352C2.55272 3.25975 2.5 3.13261 2.5 3L2.50977 2.90234C2.52255 2.83817 2.54769 2.7771 2.58398 2.72266L2.64648 2.64648C2.71689 2.57608 2.80611 2.52894 2.90234 2.50977L3 2.5ZM10.5742 17.6143C10.3001 17.5007 9.998 17.4714 9.70703 17.5293C9.41622 17.5872 9.14913 17.7298 8.93945 17.9395C8.72977 18.1491 8.58723 18.4162 8.5293 18.707C8.47142 18.998 8.50073 19.3001 8.61426 19.5742C8.7278 19.8482 8.92038 20.0823 9.16699 20.2471C9.41363 20.4118 9.7034 20.5 10 20.5C10.3978 20.5 10.7792 20.3419 11.0605 20.0605C11.3419 19.7792 11.5 19.3978 11.5 19C11.5 18.7034 11.4118 18.4136 11.2471 18.167C11.0823 17.9204 10.8482 17.7278 10.5742 17.6143ZM18.5742 17.6143C18.3001 17.5007 17.998 17.4714 17.707 17.5293C17.4162 17.5872 17.1491 17.7298 16.9395 17.9395C16.7298 18.1491 16.5872 18.4162 16.5293 18.707C16.4714 18.998 16.5007 19.3001 16.6143 19.5742C16.7278 19.8482 16.9204 20.0823 17.167 20.2471C17.4136 20.4118 17.7034 20.5 18 20.5C18.3978 20.5 18.7792 20.3419 19.0605 20.0605C19.3419 19.7792 19.5 19.3978 19.5 19C19.5 18.7034 19.4118 18.4136 19.2471 18.167C19.0823 17.9204 18.8482 17.7278 18.5742 17.6143ZM8.38965 12.5H17.4102V12.499C17.7477 12.5056 18.0777 12.3988 18.3467 12.1943C18.6193 11.9871 18.8123 11.6928 18.8945 11.3604L18.8955 11.3613L20.2051 6.12109L20.3604 5.5H6.63965L8.38965 12.5Z"
                    fill="#6E3DFF"
                    stroke="#6E3DFF"
                  />
                </svg>
              </span>
              {totalCountBasket >= 1 ? (
                <span className="absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-main font-regular text-[12px] text-white">
                  {totalCountBasket ?? 0}
                </span>
              ) : null}
            </Link>
          </DropdownTrigger>
          <DropdownMenu
            className="h-[550px] w-[516px]"
            aria-label="Static Actions"
            items={[{ label: 'jjjjjjjj', key: 'jjfjfjffjfjfjfjfjfjfjfj' }]}
          >
            <>
              <DropdownItem
                closeOnSelect={false}
                className="data-[hover=true]:!bg-transparent"
                key={'logout'}
              >
                <span className="font-medium text-[18px] text-[#7D8793]">
                  {Array.isArray(baskets) ? baskets?.length : '0'} محصول
                </span>
                {baskets?.length >= 1 ? (
                  <div className="custom_sidebar mt-5 h-[410px] space-y-4 overflow-auto px-4 pb-3">
                    {baskets?.map((product, idx) => (
                      <CardBasket
                        showAddBasketDialog={false}
                        showOtherItem={false}
                        key={idx}
                        // @ts-expect-error error
                        product={
                          product.type === 'PRODUCT_DIGITAL' || product.type === 'PRODUCT_PHYSICAL'
                            ? product.product
                            : product.type === 'COURSE'
                              ? product.course
                              : product.lpas
                        }
                      />
                    ))}
                  </div>
                ) : (
                  <EmptyCartPage className="!mt-28 h-[250px] w-[250px]" />
                )}
                {baskets?.length >= 1 && (
                  <div className="mt-6 flex items-center justify-between gap-5">
                    <Link
                      onPress={onRedirect}
                      className="h-[48px] w-full bg-main font-medium text-white lg:w-full"
                    >
                      ثبت سفارش
                    </Link>
                    <div className="space-y-3">
                      <span className="whitespace-nowrap font-medium text-[12px] text-[#7D8793]">
                        مبلغ قابل پرداخت
                      </span>

                      <span className="flex items-center">
                        <span className="whitespace-nowrap font-bold text-[16px] text-[#232429]">
                          {Number(totalProductPriceWithDiscount)?.toLocaleString()}{' '}
                        </span>
                        <svg
                          width="22"
                          height="12"
                          viewBox="0 0 22 12"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M15.264 3.852C15.744 3.852 16.164 3.968 16.524 4.2C16.884 4.424 17.16 4.744 17.352 5.16C17.552 5.568 17.652 6.04 17.652 6.576V7.644H19.38C19.812 7.644 20.116 7.572 20.292 7.428C20.468 7.276 20.548 7.068 20.532 6.804C20.516 6.572 20.472 6.252 20.4 5.844C20.328 5.436 20.256 5.052 20.184 4.692L21.264 4.404C21.36 4.788 21.448 5.216 21.528 5.688C21.608 6.152 21.656 6.528 21.672 6.816C21.68 7.184 21.604 7.532 21.444 7.86C21.284 8.18 21.032 8.44 20.688 8.64C20.344 8.84 19.924 8.94 19.428 8.94H17.64V9.012C17.64 9.604 17.532 10.12 17.316 10.56C17.108 11.008 16.768 11.36 16.296 11.616C15.832 11.872 15.228 12 14.484 12H13.152V10.704H14.484H14.652C15.14 10.696 15.516 10.632 15.78 10.512C16.052 10.392 16.24 10.212 16.344 9.972C16.456 9.732 16.512 9.412 16.512 9.012V8.94H15.576C15.128 8.94 14.76 8.912 14.472 8.856C14.192 8.792 13.796 8.644 13.284 8.412C13.116 8.596 12.92 8.74 12.696 8.844C12.48 8.948 12.26 9 12.036 9H11.664C11.12 9 10.684 8.896 10.356 8.688C10.036 8.472 9.804 8.176 9.66 7.8C9.524 7.416 9.456 6.952 9.456 6.408V2.556C9.456 2.404 9.416 2.292 9.336 2.22C9.264 2.148 9.128 2.112 8.928 2.112H8.556C8.34 2.112 8.196 2.144 8.124 2.208C8.052 2.272 8.016 2.388 8.016 2.556L8.028 7.908C8.028 8.844 7.772 9.576 7.26 10.104C6.748 10.64 5.956 10.908 4.884 10.908H3.684C2.996 10.908 2.412 10.744 1.932 10.416C1.452 10.096 1.088 9.664 0.84 9.12C0.6 8.584 0.48 8.004 0.48 7.38C0.48 6.86 0.556 6.34 0.708 5.82C0.868 5.292 1.068 4.804 1.308 4.356L2.256 4.872C2.048 5.312 1.888 5.736 1.776 6.144C1.664 6.552 1.608 6.964 1.608 7.38C1.608 7.828 1.676 8.22 1.812 8.556C1.956 8.892 2.18 9.152 2.484 9.336C2.796 9.52 3.196 9.612 3.684 9.612H4.884C5.404 9.612 5.808 9.556 6.096 9.444C6.384 9.34 6.588 9.168 6.708 8.928C6.828 8.68 6.888 8.34 6.888 7.908V2.52C6.888 2.168 6.94 1.868 7.044 1.62C7.156 1.364 7.336 1.168 7.584 1.032C7.84 0.888 8.16 0.816 8.544 0.816H8.928C9.312 0.816 9.624 0.888 9.864 1.032C10.112 1.168 10.292 1.364 10.404 1.62C10.524 1.876 10.584 2.172 10.584 2.508L10.596 6.408C10.596 6.8 10.62 7.084 10.668 7.26C10.716 7.428 10.812 7.544 10.956 7.608C11.1 7.672 11.34 7.704 11.676 7.704H12.024C12.208 7.704 12.352 7.664 12.456 7.584C12.56 7.504 12.632 7.376 12.672 7.2L13.032 5.904C13.208 5.256 13.488 4.752 13.872 4.392C14.256 4.032 14.72 3.852 15.264 3.852ZM13.836 7.272C14.236 7.432 14.548 7.54 14.772 7.596C14.996 7.644 15.264 7.668 15.576 7.668H16.512V6.576C16.512 6.12 16.412 5.764 16.212 5.508C16.012 5.252 15.704 5.124 15.288 5.124C15.016 5.124 14.78 5.22 14.58 5.412C14.38 5.596 14.228 5.876 14.124 6.252L13.836 7.272ZM4.548 3.648C4.764 3.648 4.984 3.648 5.208 3.648V4.968H4.548C4.324 4.968 4.104 4.968 3.888 4.968V3.648H4.548ZM20.712 2.976C20.504 2.976 20.348 2.976 20.244 2.976C20.148 2.976 20 2.976 19.8 2.976H19.236V1.704H20.712V2.976ZM17.796 2.976V1.704H19.26V2.976H17.796Z"
                            fill="#7D8793"
                          />
                        </svg>
                      </span>
                    </div>
                  </div>
                )}
              </DropdownItem>
            </>
          </DropdownMenu>
        </Dropdown>
      </span> */}
    </div>
  );
};

export default Cart;
