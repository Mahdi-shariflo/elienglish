'use client';
import React, { ReactNode } from 'react';
import Message from '@/../public/images/message.png';
import Image from 'next/image';
import Title from '@/components/common/Title';
import Textarea from '@/components/common/form/Textarea';
import Input from '@/components/common/form/Input';
import Button from '@/components/common/Button';
import { useFormik } from 'formik';
import * as Yup from 'yup';
import { useCreateContactus } from '@/hooks/contactus/useCreateContactus';
import { useGetTopBanner } from '@/hooks/settings/useGetTopBanner';
const contact = [
  {
    title: 'تماس',
    content: '09123456789',
    subContent: 'در روزهای کاری ساعت 9 الی 17 ، از طریق تماس تلفنی در ارتباط باشید',
    icon: (
      <svg
        width="32"
        height="32"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M20.0672 6.66927C21.3695 6.92336 22.5664 7.56028 23.5046 8.49852C24.4429 9.43676 25.0798 10.6336 25.3339 11.9359M20.0672 1.33594C22.7729 1.63652 25.296 2.84817 27.2222 4.77195C29.1484 6.69573 30.3632 9.21728 30.6672 11.9226M29.3339 22.5626V26.5626C29.3354 26.9339 29.2593 27.3015 29.1106 27.6417C28.9618 27.982 28.7436 28.2874 28.47 28.5384C28.1964 28.7895 27.8733 28.9806 27.5216 29.0995C27.1698 29.2185 26.7971 29.2627 26.4272 29.2293C22.3243 28.7835 18.3832 27.3815 14.9206 25.1359C11.699 23.0888 8.96768 20.3575 6.92056 17.1359C4.6672 13.6575 3.26489 9.69726 2.82723 5.57594C2.79391 5.20723 2.83773 4.83562 2.9559 4.48477C3.07406 4.13392 3.26399 3.81152 3.51358 3.5381C3.76318 3.26468 4.06697 3.04622 4.40562 2.89663C4.74426 2.74705 5.11035 2.66962 5.48056 2.66927H9.48056C10.1276 2.6629 10.755 2.89204 11.2456 3.31398C11.7362 3.73592 12.0567 4.32187 12.1472 4.9626C12.3161 6.24269 12.6292 7.49957 13.0806 8.70927C13.26 9.1865 13.2988 9.70516 13.1924 10.2038C13.0861 10.7024 12.839 11.1601 12.4806 11.5226L10.7872 13.2159C12.6853 16.554 15.4492 19.3179 18.7872 21.2159L20.4806 19.5226C20.8431 19.1641 21.3008 18.9171 21.7994 18.8107C22.298 18.7044 22.8167 18.7432 23.2939 18.9226C24.5036 19.374 25.7605 19.6871 27.0406 19.8559C27.6883 19.9473 28.2798 20.2735 28.7026 20.7726C29.1254 21.2717 29.3501 21.9087 29.3339 22.5626Z"
          stroke="#6E3DFF"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    ),
  },
  {
    title: 'تیکت',
    content: 'پشتیبانی بهتر و سریع تر در ارسال تیکت',
    icon: (
      <svg
        width="36"
        height="36"
        viewBox="0 0 36 36"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M11.9993 16.5C11.7026 16.5 11.4126 16.588 11.166 16.7528C10.9193 16.9176 10.727 17.1519 10.6135 17.426C10.5 17.7001 10.4703 18.0017 10.5281 18.2926C10.586 18.5836 10.7289 18.8509 10.9387 19.0607C11.1484 19.2704 11.4157 19.4133 11.7067 19.4712C11.9976 19.5291 12.2992 19.4994 12.5733 19.3858C12.8474 19.2723 13.0817 19.08 13.2465 18.8334C13.4113 18.5867 13.4993 18.2967 13.4993 18C13.4993 17.6022 13.3413 17.2206 13.06 16.9393C12.7787 16.658 12.3971 16.5 11.9993 16.5ZM17.9993 16.5C17.7026 16.5 17.4126 16.588 17.166 16.7528C16.9193 16.9176 16.727 17.1519 16.6135 17.426C16.5 17.7001 16.4703 18.0017 16.5281 18.2926C16.586 18.5836 16.7289 18.8509 16.9387 19.0607C17.1484 19.2704 17.4157 19.4133 17.7067 19.4712C17.9976 19.5291 18.2992 19.4994 18.5733 19.3858C18.8474 19.2723 19.0817 19.08 19.2465 18.8334C19.4113 18.5867 19.4993 18.2967 19.4993 18C19.4993 17.6022 19.3413 17.2206 19.06 16.9393C18.7787 16.658 18.3971 16.5 17.9993 16.5ZM23.9993 16.5C23.7026 16.5 23.4126 16.588 23.166 16.7528C22.9193 16.9176 22.727 17.1519 22.6135 17.426C22.5 17.7001 22.4703 18.0017 22.5281 18.2926C22.586 18.5836 22.7289 18.8509 22.9387 19.0607C23.1484 19.2704 23.4157 19.4133 23.7067 19.4712C23.9976 19.5291 24.2992 19.4994 24.5733 19.3858C24.8474 19.2723 25.0817 19.08 25.2465 18.8334C25.4113 18.5867 25.4993 18.2967 25.4993 18C25.4993 17.6022 25.3413 17.2206 25.06 16.9393C24.7787 16.658 24.3971 16.5 23.9993 16.5ZM17.9993 3C16.0295 3 14.0789 3.38799 12.2591 4.14181C10.4392 4.89563 8.78559 6.00052 7.39271 7.3934C4.57966 10.2064 2.99931 14.0218 2.99931 18C2.9862 21.4637 4.1855 24.8228 6.38931 27.495L3.38931 30.495C3.18117 30.7059 3.04018 30.9738 2.98412 31.2648C2.92806 31.5558 2.95944 31.8568 3.07431 32.13C3.1989 32.3999 3.40087 32.6267 3.65458 32.7816C3.90829 32.9365 4.20231 33.0125 4.49931 33H17.9993C21.9776 33 25.7929 31.4196 28.6059 28.6066C31.419 25.7936 32.9993 21.9782 32.9993 18C32.9993 14.0218 31.419 10.2064 28.6059 7.3934C25.7929 4.58035 21.9776 3 17.9993 3ZM17.9993 30H8.11431L9.50931 28.605C9.65104 28.4661 9.7638 28.3004 9.84104 28.1176C9.91829 27.9348 9.95849 27.7385 9.95931 27.54C9.95367 27.1443 9.79193 26.7669 9.50931 26.49C7.54519 24.5281 6.32207 21.9458 6.04835 19.1832C5.77462 16.4206 6.46722 13.6485 8.00815 11.3393C9.54908 9.03006 11.843 7.32654 14.4991 6.51896C17.1552 5.71138 20.0091 5.84971 22.5746 6.91037C25.1402 7.97103 27.2586 9.88841 28.569 12.3358C29.8793 14.7833 30.3006 17.6093 29.761 20.3325C29.2214 23.0557 27.7543 25.5076 25.6096 27.2704C23.465 29.0332 20.7755 29.9978 17.9993 30Z"
          fill="#6E3DFF"
        />
      </svg>
    ),
  },
  {
    title: 'ایمیل',
    content: 'info@elienglish.com',
    icon: (
      <svg
        width="30"
        height="24"
        viewBox="0 0 30 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M25.5 0H4.5C3.30653 0 2.16193 0.474106 1.31802 1.31802C0.474106 2.16193 0 3.30653 0 4.5V19.5C0 20.6935 0.474106 21.8381 1.31802 22.682C2.16193 23.5259 3.30653 24 4.5 24H25.5C26.6935 24 27.8381 23.5259 28.682 22.682C29.5259 21.8381 30 20.6935 30 19.5V4.5C30 3.30653 29.5259 2.16193 28.682 1.31802C27.8381 0.474106 26.6935 0 25.5 0ZM4.5 3H25.5C25.8978 3 26.2794 3.15804 26.5607 3.43934C26.842 3.72064 27 4.10218 27 4.5L15 11.82L3 4.5C3 4.10218 3.15804 3.72064 3.43934 3.43934C3.72064 3.15804 4.10218 3 4.5 3ZM27 19.5C27 19.8978 26.842 20.2794 26.5607 20.5607C26.2794 20.842 25.8978 21 25.5 21H4.5C4.10218 21 3.72064 20.842 3.43934 20.5607C3.15804 20.2794 3 19.8978 3 19.5V7.92L14.22 14.775C14.448 14.9067 14.7067 14.976 14.97 14.976C15.2333 14.976 15.492 14.9067 15.72 14.775L27 7.92V19.5Z"
          fill="#6E3DFF"
        />
      </svg>
    ),
  },
  {
    title: 'سوالات متداول',
    content: 'پاسخ های خود را سریع تر پیدا کنید',
    icon: (
      <svg
        width="36"
        height="36"
        viewBox="0 0 36 36"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M22.1562 8.805C22.5006 9.00056 22.9084 9.05196 23.2906 8.94798C23.6728 8.84401 23.9983 8.5931 24.1962 8.25C24.3599 7.96103 24.615 7.73459 24.9213 7.60617C25.2276 7.47775 25.5678 7.45463 25.8887 7.54042C26.2095 7.62621 26.4929 7.81607 26.6942 8.08022C26.8955 8.34437 27.0035 8.66787 27.0012 9C27.0012 9.39782 26.8432 9.77935 26.5618 10.0607C26.2805 10.342 25.899 10.5 25.5012 10.5C25.1034 10.5 24.7218 10.658 24.4405 10.9393C24.1592 11.2206 24.0012 11.6022 24.0012 12C24.0012 12.3978 24.1592 12.7794 24.4405 13.0607C24.7218 13.342 25.1034 13.5 25.5012 13.5C26.291 13.4995 27.0667 13.2911 27.7505 12.8959C28.4342 12.5006 29.0019 11.9323 29.3965 11.2481C29.7911 10.564 29.9986 9.78799 29.9983 8.9982C29.998 8.2084 29.7898 7.4326 29.3947 6.74875C28.9996 6.0649 28.4314 5.49708 27.7474 5.10234C27.0633 4.70761 26.2874 4.49987 25.4976 4.5C24.7078 4.50013 23.9319 4.70811 23.248 5.10307C22.564 5.49802 21.9961 6.06602 21.6012 6.75C21.502 6.9212 21.4377 7.11033 21.4119 7.3065C21.3861 7.50267 21.3994 7.70199 21.451 7.893C21.5026 8.08401 21.5915 8.26293 21.7125 8.41945C21.8335 8.57597 21.9843 8.707 22.1562 8.805ZM28.6062 19.5C28.2124 19.4489 27.8145 19.556 27.4996 19.7978C27.1847 20.0396 26.9785 20.3964 26.9262 20.79C26.6114 23.3327 25.3778 25.6726 23.4576 27.369C21.5375 29.0654 19.0633 30.0011 16.5012 30H8.11619L9.09119 29.025C9.37056 28.744 9.52738 28.3638 9.52738 27.9675C9.52738 27.5712 9.37056 27.191 9.09119 26.91C7.62861 25.4417 6.63326 23.5734 6.23053 21.5404C5.82779 19.5074 6.03567 17.4008 6.82798 15.4857C7.6203 13.5707 8.96161 11.933 10.683 10.7788C12.4043 9.62469 14.4287 9.00576 16.5012 9C16.899 9 17.2805 8.84196 17.5618 8.56066C17.8432 8.27935 18.0012 7.89782 18.0012 7.5C18.0012 7.10217 17.8432 6.72064 17.5618 6.43934C17.2805 6.15803 16.899 6 16.5012 6C13.965 6.01058 11.4832 6.73535 9.33988 8.09129C7.19661 9.44723 5.47863 11.3795 4.38278 13.6667C3.28693 15.9539 2.85752 18.5035 3.14375 21.0235C3.42999 23.5435 4.42028 25.9318 6.00119 27.915L3.43619 30.435C3.22805 30.6459 3.08705 30.9138 3.03099 31.2048C2.97493 31.4958 3.00632 31.7968 3.12119 32.07C3.23372 32.3439 3.42481 32.5784 3.67039 32.7439C3.91597 32.9094 4.20505 32.9985 4.50119 33H16.5012C19.7884 33.0004 22.9628 31.8015 25.4289 29.6281C27.895 27.4547 29.4835 24.4562 29.8962 21.195C29.9236 20.9989 29.9119 20.7993 29.8618 20.6077C29.8117 20.4161 29.7242 20.2363 29.6043 20.0788C29.4844 19.9212 29.3344 19.7889 29.1631 19.6896C28.9918 19.5902 28.8025 19.5258 28.6062 19.5ZM26.0712 15.105C25.7981 14.9842 25.4952 14.9476 25.2012 15L24.9312 15.09L24.6612 15.225L24.4362 15.42C24.3013 15.5582 24.1943 15.7212 24.1212 15.9C24.0325 16.0871 23.9913 16.2932 24.0012 16.5C23.9968 16.7001 24.0325 16.899 24.1062 17.085C24.1838 17.265 24.2959 17.4281 24.4362 17.565C24.5763 17.704 24.7426 17.814 24.9253 17.8887C25.1081 17.9633 25.3038 18.0011 25.5012 18C25.899 18 26.2805 17.842 26.5618 17.5607C26.8432 17.2794 27.0012 16.8978 27.0012 16.5C27.0063 16.3032 26.9652 16.108 26.8812 15.93C26.72 15.5696 26.4316 15.2812 26.0712 15.12V15.105Z"
          fill="#6E3DFF"
        />
      </svg>
    ),
  },
];
const page = () => {
  const { data } = useGetTopBanner();
  const { mutate, isPending } = useCreateContactus();
  const formik = useFormik({
    initialValues: {
      message: '',
      first_name: '',
      last_name: '',
      mobileNumber: '',
    },
    validationSchema: Yup.object({
      message: Yup.string().required('فیلد اجباری است'),
      first_name: Yup.string().required('فیلد اجباری است'),
      last_name: Yup.string().required('فیلد اجباری است'),
      mobileNumber: Yup.string().required('فیلد اجباری است'),
    }),
    onSubmit: (values) => {
      const mainData = {
        message: values.message,
        fullName: `${values.first_name} ${values.last_name}`,
        mobileNumber: values.mobileNumber,
      };
      mutate({ data: mainData });
    },
  });
  const topBannerData = data?.data?.data;

  return (
    <div
      className={`relative mb-32 ${topBannerData ? '-mt-[1.6rem] lg:-mt-[7.2rem]' : '-mt-24 lg:-mt-[10.9rem]'}`}
    >
      <div className="pt-[25rem]">
        <div className="bg-contact-us absolute top-0 z-50 h-[672px] w-full lg:top-20"></div>
        <div className="container_page relative z-50 rounded-lg bg-white p-3 dark:bg-[#172334] lg:px-14">
          <div className="flex items-center justify-between">
            <div>
              <p className="font-bold text-[16px] text-main lg:text-[32px]">تماس با الی انگلیش</p>
              <p className="font-medium text-[#263248] dark:text-[#8E98A8]">
                از مسیر های زیر با ما در ارتباط باشید.
              </p>
            </div>
            <span className="-mt-20 hidden lg:block">
              <Image src={Message} alt="" />
            </span>
          </div>
          <div className="mt-10 grid gap-5 lg:mt-0 lg:grid-cols-2">
            {contact.map((item, idx) => (
              <CardContactUs contact={item} key={idx} />
            ))}
          </div>
          <div className="pt-20">
            <p className="font-medium text-[#0B1524] dark:text-[#8E98A8]">
              با پر کردن فرم زیر کارشناسان ما در کمترین زمان ممکن با شما تماس خواهند گرفت.
            </p>
            <div className="!mt-10 rounded-lg border border-gray-100 p-4 pt-10 drop-shadow-sm dark:border-[#263248] lg:mt-0">
              <Title title="فرم تماس با ما" />
              <form onSubmit={formik.handleSubmit} className="pt-5">
                <div className="grid gap-4 lg:grid-cols-2">
                  <div className="grid gap-4 lg:grid-cols-2">
                    <Input formik={formik} name="first_name" label={'نام'} />
                    <Input formik={formik} name="last_name" label={'نام‌خانوادگی'} />
                    <Input
                      formik={formik}
                      name="mobileNumber"
                      className="col-span-2"
                      label={'شماره تماس'}
                    />
                  </div>
                  <div>
                    <Textarea
                      formik={formik}
                      name="message"
                      classNameInput="!h-[160px]"
                      label={'متن پیام'}
                    />
                  </div>
                </div>
                <div className="mt-5 flex justify-end">
                  <Button
                    isPending={isPending}
                    type="submit"
                    className="bg-main text-white lg:w-[120px]"
                  >
                    ارسال پیام
                  </Button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

const CardContactUs = ({
  contact,
}: {
  contact: { icon: ReactNode; title: string; content: string; subContent?: string };
}) => {
  return (
    <div className="flex items-start gap-3">
      <div className="flex h-[50px] min-h-[50px] w-[50px] min-w-[50px] items-center justify-center rounded-lg bg-[#E5EAEF]">
        {contact.icon}
      </div>
      <div>
        <p className="font-extrabold text-[16px] text-[#33435A] dark:text-white lg:text-[28px]">
          {contact.title}
        </p>
        <p className="font-medium text-[12px] text-main lg:text-[16px]">{contact.content}</p>
        {contact.subContent && (
          <p className="font-medium text-[12px] text-[#6A7890] lg:text-[16px]">
            {contact.subContent}
          </p>
        )}
      </div>
    </div>
  );
};

export default page;
